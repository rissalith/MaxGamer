<!-- å……å€¼ä¸­å¿ƒé¡µé¢ - Googleé£æ ¼ -->
<div class="settings-page">
    <div class="settings-header">
        <h1 class="settings-title">å……å€¼ä¸­å¿ƒ</h1>
    </div>

    <div class="settings-body">
        <!-- å·¦ä¾§å¯¼èˆª -->
        <nav class="settings-nav">
            <div class="settings-nav-item active" data-tab="overview">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path>
                    <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path>
                    <path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path>
                </svg>
                <span>ä½™é¢æ¦‚è§ˆ</span>
            </div>
            <div class="settings-nav-item" data-tab="recharge">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="16"></line>
                    <line x1="8" y1="12" x2="16" y2="12"></line>
                </svg>
                <span>å……å€¼</span>
            </div>
            <div class="settings-nav-item" data-tab="history">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                </svg>
                <span>äº¤æ˜“è®°å½•</span>
            </div>
        </nav>

        <!-- å³ä¾§å†…å®¹åŒº -->
        <div class="settings-content">
            <!-- ä½™é¢æ¦‚è§ˆ -->
            <div class="settings-panel active" id="overview-panel">
                <div class="panel-card">
                    <div class="card-header">
                        <h2>å½“å‰ä½™é¢</h2>
                    </div>
                    <div class="card-body">
                        <div class="balance-display">
                            <div class="balance-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 6v12M6 12h12"/>
                                </svg>
                            </div>
                            <div class="balance-info">
                                <span class="balance-amount" id="walletBalance">0</span>
                                <span class="balance-unit">MaxPoints</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-card">
                    <div class="card-header">
                        <h2>è´¦æˆ·ç»Ÿè®¡</h2>
                    </div>
                    <div class="card-body">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">ç´¯è®¡å……å€¼</span>
                                <span class="stat-value" id="totalRecharged">0 MP</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">ç´¯è®¡æ¶ˆè´¹</span>
                                <span class="stat-value" id="totalConsumed">0 MP</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-card">
                    <div class="card-header">
                        <h2>å¿«æ·æ“ä½œ</h2>
                    </div>
                    <div class="card-body">
                        <button class="btn-primary" onclick="WalletManager.switchTab('recharge')">
                            ç«‹å³å……å€¼
                        </button>
                    </div>
                </div>
            </div>

            <!-- å……å€¼å¥—é¤ -->
            <div class="settings-panel" id="recharge-panel">
                <div class="panel-card">
                    <div class="card-header">
                        <h2>é€‰æ‹©å……å€¼å¥—é¤</h2>
                    </div>
                    <div class="card-body">
                        <div class="package-options" id="packagesGrid">
                            <!-- å¥—é¤å°†åŠ¨æ€åŠ è½½ -->
                        </div>
                    </div>
                </div>

                <div class="panel-card">
                    <div class="card-header">
                        <h2>å……å€¼è¯´æ˜</h2>
                    </div>
                    <div class="card-body">
                        <div class="info-list">
                            <div class="info-item">
                                <span class="info-icon">ğŸ’¡</span>
                                <span class="info-text">MaxPoints (MP) å¯ç”¨äºè´­ä¹°æ¸¸æˆå’ŒåŠŸèƒ½</span>
                            </div>
                            <div class="info-item">
                                <span class="info-icon">ğŸ”’</span>
                                <span class="info-text">æ‰€æœ‰äº¤æ˜“å‡æœ‰è®°å½•ï¼Œå®‰å…¨é€æ˜</span>
                            </div>
                            <div class="info-item">
                                <span class="info-icon">âš¡</span>
                                <span class="info-text">å……å€¼å³æ—¶åˆ°è´¦ï¼Œæ— éœ€ç­‰å¾…</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- äº¤æ˜“è®°å½• -->
            <div class="settings-panel" id="history-panel">
                <div class="panel-card">
                    <div class="card-header">
                        <h2>äº¤æ˜“è®°å½•</h2>
                    </div>
                    <div class="card-body">
                        <div class="transactions-list" id="transactionsList">
                            <!-- äº¤æ˜“è®°å½•å°†åŠ¨æ€åŠ è½½ -->
                        </div>
                        <div class="load-more" id="loadMoreBtn" style="display: none;">
                            <button class="btn-text" onclick="WalletManager.loadMoreTransactions()">åŠ è½½æ›´å¤š</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- å……å€¼ç¡®è®¤å¼¹çª— -->
<div class="modal-overlay" id="rechargeModal" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-header">
            <h3>ç¡®è®¤å……å€¼</h3>
            <button class="btn-icon" onclick="WalletManager.closeRechargeModal()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <div class="modal-body">
            <div class="confirm-info">
                <div class="confirm-row">
                    <span class="confirm-label">å¥—é¤åç§°</span>
                    <span class="confirm-value" id="rechargePackageName">-</span>
                </div>
                <div class="confirm-row">
                    <span class="confirm-label">è·å¾—ç§¯åˆ†</span>
                    <span class="confirm-value highlight" id="rechargePoints">-</span>
                </div>
                <div class="confirm-row">
                    <span class="confirm-label">æ”¯ä»˜é‡‘é¢</span>
                    <span class="confirm-value price" id="rechargePrice">-</span>
                </div>
            </div>
            <div class="confirm-note">
                <p>ğŸ’¡ æµ‹è¯•æ¨¡å¼ï¼šç‚¹å‡»ç¡®è®¤ç›´æ¥åˆ°è´¦</p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-text" onclick="WalletManager.closeRechargeModal()">å–æ¶ˆ</button>
            <button class="btn-primary" onclick="WalletManager.confirmRecharge()">ç¡®è®¤å……å€¼</button>
        </div>
    </div>
</div>

<style>
/* å…¨å±€å­—ä½“ */
* {
    font-family: 'Noto Sans SC', 'Segoe UI', Roboto, -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Arial, sans-serif;
}

/* ä½™é¢æ˜¾ç¤º */
.balance-display {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 0;
}

.balance-icon {
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 16px;
}

.balance-icon svg {
    width: 32px;
    height: 32px;
    color: white;
}

.balance-info {
    display: flex;
    flex-direction: column;
}

.balance-amount {
    font-size: 36px;
    font-weight: 400;
    color: #202124;
    letter-spacing: -0.5px;
}

.balance-unit {
    font-size: 14px;
    font-weight: 400;
    color: #5f6368;
    margin-top: 4px;
}

/* ç»Ÿè®¡ç½‘æ ¼ */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 24px;
}

.stat-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.stat-label {
    font-size: 12px;
    color: #5f6368;
}

.stat-value {
    font-size: 20px;
    font-weight: 500;
    color: #202124;
}

/* å……å€¼å¥—é¤é€‰é¡¹ */
.package-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.package-option {
    cursor: pointer;
}

.package-option input {
    display: none;
}

.package-content {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px;
    border: 2px solid #e8eaed;
    border-radius: 8px;
    transition: all 0.15s ease;
}

.package-option:hover .package-content {
    background: #f8f9fa;
    border-color: #dadce0;
}

.package-option input:checked + .package-content {
    background: #e8f0fe;
    border-color: #1a73e8;
}

.package-icon {
    font-size: 32px;
    line-height: 1;
}

.package-info {
    flex: 1;
}

.package-name {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: #202124;
}

.package-desc {
    display: block;
    font-size: 12px;
    color: #5f6368;
    margin-top: 2px;
}

.package-price {
    font-size: 18px;
    font-weight: 500;
    color: #1a73e8;
}

.package-badge {
    background: #ea4335;
    color: white;
    font-size: 10px;
    font-weight: 500;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 8px;
}

.check-icon {
    width: 20px;
    height: 20px;
    color: #1a73e8;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.package-option input:checked + .package-content .check-icon {
    opacity: 1;
}

/* è¯´æ˜åˆ—è¡¨ */
.info-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 12px;
}

.info-icon {
    font-size: 18px;
}

.info-text {
    font-size: 14px;
    color: #5f6368;
}

/* äº¤æ˜“åˆ—è¡¨ */
.transactions-list {
    display: flex;
    flex-direction: column;
}

.transaction-item {
    display: flex;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid #e8eaed;
}

.transaction-item:last-child {
    border-bottom: none;
}

.transaction-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    font-size: 18px;
}

.transaction-icon.deposit { background: #e6f4ea; }
.transaction-icon.purchase { background: #fce8e6; }
.transaction-icon.adjust { background: #e8f0fe; }

.transaction-info {
    flex: 1;
}

.transaction-title {
    font-size: 14px;
    font-weight: 500;
    color: #202124;
}

.transaction-time {
    font-size: 12px;
    color: #5f6368;
    margin-top: 2px;
}

.transaction-amount {
    font-size: 14px;
    font-weight: 500;
}

.transaction-amount.positive { color: #1e8e3e; }
.transaction-amount.negative { color: #d93025; }

.empty-transactions {
    text-align: center;
    padding: 40px 0;
    color: #5f6368;
}

.empty-transactions-icon {
    font-size: 48px;
    margin-bottom: 12px;
}

/* åŠ è½½æ›´å¤š */
.load-more {
    text-align: center;
    padding-top: 16px;
}

.btn-text {
    background: none;
    border: none;
    color: #1a73e8;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    padding: 8px 16px;
    border-radius: 4px;
    transition: background 0.15s ease;
}

.btn-text:hover {
    background: #f1f3f4;
}

/* å¼¹çª— */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.modal-dialog {
    background: #fff;
    border-radius: 8px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 24px;
    border-bottom: 1px solid #e8eaed;
}

.modal-header h3 {
    font-size: 18px;
    font-weight: 500;
    color: #202124;
    margin: 0;
}

.btn-icon {
    width: 32px;
    height: 32px;
    border: none;
    background: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #5f6368;
    transition: background 0.15s ease;
}

.btn-icon:hover {
    background: #f1f3f4;
}

.btn-icon svg {
    width: 20px;
    height: 20px;
}

.modal-body {
    padding: 24px;
}

.confirm-info {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 16px;
}

.confirm-row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid #e8eaed;
}

.confirm-row:last-child {
    border-bottom: none;
}

.confirm-label {
    color: #5f6368;
    font-size: 14px;
}

.confirm-value {
    font-size: 14px;
    font-weight: 500;
    color: #202124;
}

.confirm-value.highlight {
    color: #1a73e8;
}

.confirm-value.price {
    color: #d93025;
    font-size: 16px;
}

.confirm-note {
    text-align: center;
    font-size: 12px;
    color: #5f6368;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    padding: 16px 24px;
    border-top: 1px solid #e8eaed;
}

/* æ·±è‰²æ¨¡å¼æ”¯æŒ */
body.dark-mode .balance-amount,
body.dark-mode .stat-value {
    color: #e8eaed;
}

body.dark-mode .package-content {
    border-color: #3c4043;
}

body.dark-mode .package-option:hover .package-content {
    background: #3c4043;
}

body.dark-mode .package-option input:checked + .package-content {
    background: #394457;
    border-color: #8ab4f8;
}

body.dark-mode .package-name,
body.dark-mode .transaction-title {
    color: #e8eaed;
}

body.dark-mode .package-price {
    color: #8ab4f8;
}

body.dark-mode .transaction-icon.deposit { background: #1e3a2f; }
body.dark-mode .transaction-icon.purchase { background: #3c2a2a; }
body.dark-mode .transaction-icon.adjust { background: #394457; }

body.dark-mode .modal-dialog {
    background: #292a2d;
}

body.dark-mode .modal-header,
body.dark-mode .modal-footer {
    border-color: #3c4043;
}

body.dark-mode .modal-header h3 {
    color: #e8eaed;
}

body.dark-mode .confirm-info {
    background: #3c4043;
}

body.dark-mode .confirm-row {
    border-color: #5f6368;
}

body.dark-mode .confirm-value {
    color: #e8eaed;
}

body.dark-mode .confirm-value.highlight {
    color: #8ab4f8;
}

/* å“åº”å¼ */
@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }
    
    .balance-display {
        flex-direction: column;
        text-align: center;
    }
    
    .balance-amount {
        font-size: 28px;
    }
}
</style>
